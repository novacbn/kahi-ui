[role="progressbar"] {
    --palette-background-bold: var(--palette-neutral-bold);
    --size-icon: var(--sizes-icon-medium);

    --value: 0;

    &:empty {
        @apply w-full;

        height: calc(var(--size-icon) * 0.25);

        border-radius: var(--radius-pill);

        background-image: linear-gradient(
            to right,
            rgb(var(--palette-background-bold)) 50%,
            rgba(var(--palette-background-bold), theme("opacity.50")) 50%
        );
        background-position: calc(100% - var(--value) * 100%) 0%;
        background-size: 200% 100%;

        transition: background-image 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94),
            background-position 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);

        &:not([aria-valuenow]) {
            animation: progress-bar-indeterminate 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite;
        }
    }

    &:not(:empty) {
        & svg {
            @apply h-[var(--size-icon)] w-[var(--size-icon)];
        }

        & circle {
            @apply;

            fill: transparent;
            stroke-width: theme("borderWidth.4");

            transform: rotate(-90deg);
            transform-origin: 50% 50%;

            transition: stroke 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                stroke-dashoffset 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        & circle:first-child {
            @apply;

            stroke: rgba(var(--palette-background-bold), theme("opacity.50"));
        }

        & circle:last-child {
            stroke: rgb(var(--palette-background-bold));
            stroke-dasharray: 88px 88px;
            stroke-dashoffset: calc(88px * (1 - var(--value)));
        }

        &:not([aria-valuenow]) {
            & circle:last-child {
                animation: progress-circle-indeterminate 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)
                    infinite;
            }
        }
    }
}

@keyframes progress-bar-indeterminate {
    0% {
        background-position: 100% 0%;
    }

    50% {
        background-position: -100% 0%;
    }

    100% {
        background-position: -100% 0%;
    }
}

@keyframes progress-circle-indeterminate {
    0% {
        stroke-dashoffset: 88px;
    }

    50% {
        stroke-dashoffset: -88px;
    }

    100% {
        stroke-dashoffset: -88px;
    }
}
