@use "../abstracts/palettes";
@use "../abstracts/strings";

@mixin palette-declarations($name, $background, $foreground) {
    $name: strings.format-identifier($name);

    [data-palette="#{$name}"] {
        --palette-background-lightest: var(--palettes-#{$background}-lightest);
        --palette-background-lighter: var(--palettes-#{$background}-lighter);
        --palette-background-light: var(--palettes-#{$background}-light);
        --palette-background-normal: var(--palettes-#{$background}-normal);
        --palette-background-bold: var(--palettes-#{$background}-bold);
        --palette-background-bolder: var(--palettes-#{$background}-bolder);
        --palette-background-boldest: var(--palettes-#{$background}-boldest);

        --palette-foreground-lightest: var(--palettes-#{$foreground}-lightest);
        --palette-foreground-lighter: var(--palettes-#{$foreground}-lighter);
        --palette-foreground-light: var(--palettes-#{$foreground}-light);
        --palette-foreground-normal: var(--palettes-#{$foreground}-normal);
        --palette-foreground-bold: var(--palettes-#{$foreground}-bold);
        --palette-foreground-bolder: var(--palettes-#{$foreground}-bolder);
        --palette-foreground-boldest: var(--palettes-#{$foreground}-boldest);
    }
}

@mixin declarations() {
    @include palette-declarations("auto", "auto", "inverse");
    @include palette-declarations("inverse", "inverse", "auto");

    [data-palette="inherit"] {
        // NOTE: meh, not worth it enough to mixinify this block

        --palettes-background-lightest: inherit;
        --palettes-background-lighter: inherit;
        --palettes-background-light: inherit;
        --palettes-background-normal: inherit;
        --palettes-background-bold: inherit;
        --palettes-background-bolder: inherit;
        --palettes-background-boldest: inherit;

        --palettes-foreground-lightest: inherit;
        --palettes-foreground-lighter: inherit;
        --palettes-foreground-light: inherit;
        --palettes-foreground-normal: inherit;
        --palettes-foreground-bold: inherit;
        --palettes-foreground-bolder: inherit;
        --palettes-foreground-boldest: inherit;
    }

    @include palettes.each() using ($background, $foreground) {
        @include palette-declarations($background, $background, $foreground);
    }
}

@if not env("DISABLE_GLOBALS_PALETTES") {
    @include declarations();
}
