@use "../../../../framework/abstracts/transitions";
@use "../../../../framework/abstracts/variables";

@use "../../../../framework/appearances/toggle";

@use "../../../../framework/mixins/palettes";
@use "../../../../framework/mixins/sizings";
@use "../../../../framework/mixins/radius";
@use "../../../../framework/mixins/transforms";

@if not env("DISABLE_COMPONENTS_INTERACTABLES_SWITCH") {
    .switch {
        @include palettes.var-palette($palette: "neutral");
        @include sizings.var-reset-font($tier: "inline", $namespace: "switch");

        @include toggle.base($namespace: "switch");
        border-radius: #{variables.format-var("shapes.pill")};

        @include toggle.state-disabled() {
            @include toggle.base-disabled($namespace: "switch");
        }

        @include toggle.state-active() {
            @include toggle.variation-loud-active($namespace: "switch");
        }

        &::before {
            @include toggle.pseudo-base($width: 2);

            clip-path: inset(0% 50% 0% 0% round #{variables.format-var("shapes.pill")});

            @include transitions.push(clip-path, "movement");

            @include transitions.build();
        }

        @include toggle.state-checked() {
            &::before {
                clip-path: inset(0% 0% 0% 50% round #{variables.format-var("shapes.pill")});
            }
        }

        @include toggle.state-active() {
            &::before {
                clip-path: inset(0% 25% 0% 25% round #{variables.format-var("shapes.pill")});
            }
        }

        @include toggle.state-checked($is-inverse: true) {
            @include toggle.variation-block-base($namespace: "switch");

            @include toggle.state-focus() {
                @include toggle.variation-block-focus($namespace: "switch");
            }

            @include toggle.state-active() {
                @include toggle.variation-block-active($namespace: "switch");
            }
        }

        @include toggle.state-checked() {
            @include toggle.variation-block-base($namespace: "switch", $is-checked: true);

            @include toggle.state-focus() {
                @include toggle.variation-block-focus($namespace: "switch", $is-checked: true);
            }

            @include toggle.state-active() {
                @include toggle.variation-block-active($namespace: "switch", $is-checked: true);
            }
        }
    }
}
