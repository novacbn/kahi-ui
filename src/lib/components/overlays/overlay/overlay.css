.overlay {
    --orientation-direction: column;

    --orientation-align: var(--flex-alignment-x);
    --orientation-justify: var(--flex-alignment-y);

    --flex-alignment-x: center;
    --flex-alignment-y: center;

    --spacing-x: 0;
    --spacing-y: 0;

    display: block;
    position: fixed;

    inset: 0;

    z-index: 2;
}

.overlay > .backdrop {
    transition: opacity var(--animation-reveal-duration) var(--animation-reveal-function);

    pointer-events: auto;
}

.overlay > section {
    display: flex;
    position: absolute;

    flex-direction: var(--orientation-direction);
    gap: var(--spacing-y) var(--spacing-x);

    align-items: var(--orientation-align);
    justify-content: var(--orientation-justify);

    inset: 0;

    &.transition > * {
        animation: visibility-hack 0.000001s forwards paused;
    }

    & > * {
        pointer-events: auto;
    }
}

.overlay,
.overlay > section {
    pointer-events: none;
}

input[type="checkbox"][role="presentation"] {
    &:not(:checked) + .overlay {
        & > .backdrop {
            opacity: 0;
        }

        & > .transition {
            --animation: var(--animation-exit);
        }

        & > .backdrop,
        & > section > * {
            pointer-events: none;
        }
    }

    &:checked + .overlay {
        & > .backdrop {
            opacity: 1;
        }

        & > section > * {
            animation-play-state: running;
        }

        & > .transition {
            --animation: var(--animation-enter);
        }
    }
}
